<?php  /* DoYouHaoBaby Framework 模板缓存文件 生成时间：2012-08-21 00:30:04  */ ?>
<?php $this->includeChildTemplate(TEMPLATE_PATH.'/Public/header.html');?><script type="text/javascript">function child(id){
	window.location.href=D.U('index?node_parentid='+id);
}

function changeNodegroup(oObj,id){
	var keyValue;
	var nodegroup_id=oObj.value;
	if(id){
		keyValue=id;
	}else{
		keyValue=getSelectValues();
	}
	
	if(!keyValue){
		needforbugAlert(D.L('请选择操作项','__COMMON_LANG__@Admin/Common_Js'),'',3);
		return false;
	}
	
	window.location.href=D.U('change_nodegroup?id='+keyValue+'&nodegroup_id='+nodegroup_id);
}
</script><section class="secondary_bar"><div class="breadcrumbs_container"><article class="breadcrumbs"><a href="<?php echo(Dyhb::U('public/fmain'));?>"><?php print Dyhb::L("主页",'Template/Default/Common',null);?></a><div class="breadcrumb_divider"></div><a class="current"><?php print Dyhb::L("节点列表",'Template/Default/Node',null);?></a><div class="breadcrumb_divider"></div><a href="javascript:void(0);" onclick="adminctrlmenuAdd('<?php echo(__SELF__);?>','<?php print Dyhb::L("节点列表",'Template/Default/Node',null);?>')" title="<?php print Dyhb::L("添加到快捷导航",'Template/Default/Common',null);?>">[+]</a></article></div></section><section id="main" class="column"><h4 class="alert_info"><?php if(isset( $sNodeName )):?><?php echo($sNodeName);?><?php endif;?><?php if($nNodeLevel==1):?><?php print Dyhb::L("应用",'Template/Default/Node',null);?><?php elseif($nNodeLevel==2):?><?php print Dyhb::L("模块",'Template/Default/Node',null);?><?php else:?><?php print Dyhb::L("操作",'Template/Default/Node',null);?><?php endif;?><?php print Dyhb::L("列表",'Template/Default/Node',null);?></h4><article class="module width_full"><header><h3><?php print Dyhb::L("操作提示",'Template/Default/Common',null);?></h3></header><div class="module_content"><ul><li><?php print Dyhb::L("Needforbug采用基于角色的权限认证体系(RBAC)来管理用户访问权限",'Template/Default/Node',null);?></li><li><?php print Dyhb::L("节点在RBAC系统中属于资源容器，里面储存了资源的层级关系",'Template/Default/Node',null);?></li><li><?php print Dyhb::L("节点的最高级别为应用",'Template/Default/Node',null);?></li><li><?php print Dyhb::L("应用的下面有模块，模块下面有操作方法",'Template/Default/Node',null);?></li><li><?php print Dyhb::L("(应用+模板+方法) 构成一个完整的资源链，我们可以通过比对来进行访问控制",'Template/Default/Node',null);?></li></ul></div></article><article class="module width_full"><div class="module_content"><div class="left operate" ><input type="button" name="add" value="<?php print Dyhb::L("新增",'Template/Default/Common',null);?>" onclick="add()" class="alt_btn">&nbsp;
						<input type="button" name="edit" value="<?php print Dyhb::L("编辑",'Template/Default/Common',null);?>" onclick="edit()" class="alt_btn">&nbsp;
						<input type="button" name="delete" value="<?php print Dyhb::L("删除",'Template/Default/Common',null);?>" onclick="foreverdel()" class="alt_btn">&nbsp;
						<input type="button" name="sort" value="<?php print Dyhb::L("排序",'Template/Default/Common',null);?>" onclick="sort()" class="alt_btn"></div><form method='get' action="<?php echo(Dyhb::U( 'node/index' ));?>" class="quick_search"><input type="hidden" name="c" value="<?php echo(MODULE_NAME);?>"/><input type="hidden" name="a" value="<?php echo(ACTION_NAME);?>"/><input type="text" name="node_name" title="<?php print Dyhb::L("节点名字",'Template/Default/Node',null);?>">						&nbsp;<input type="submit" id="" value="<?php print Dyhb::L("查询",'Template/Default/Common',null);?>" onclick="" class="alt_btn"></form></div></article><article class="module width_full"><header><h3 class="tabs_involved"><?php print Dyhb::L("节点列表",'Template/Default/Node',null);?></h3><ul class="tabs"><?php if(is_array($arrNodegroup)):$i=0;$arrList=$arrNodegroup;if(count($arrList)==0):echo"";else:foreach($arrList as $key=>$value):++$i;$mod=($i%2)?><li class="<?php if(isset($_GET['nodegroup_id']) && ($_GET['nodegroup_id']===$value['nodegroup_id'] || (!$_GET['nodegroup_id']) && !$value['nodegroup_id'])):?>active<?php endif;?>"><a href="<?php echo(Dyhb::U('node/index?nodegroup_id='.$value['nodegroup_id'] ));?>"><?php echo($value['nodegroup_title']);?></a></li><?php endforeach;endif;else:echo "";endif;?><li class="<?php if(!isset($_GET['nodegroup_id'])):?>active<?php endif;?>"><a href="<?php echo(Dyhb::U('node/index'));?>"><?php print Dyhb::L("所有",'Template/Default/Node',null);?></a></li></ul></header><div class="module_content"><table class="tablesorter" cellspacing="0" id="checkList"><thead><tr><th><input type="checkbox" onclick="checkAll('checkList')"></th><th><a href="javascript:sortBy('node_id','<?php echo($sSortByUrl);?>')" <?php echo(Admin_Extend::sortField('node_id'));?>><?php print Dyhb::L("编号",'Template/Default/Common',null);?></a></th><th><a href="javascript:sortBy('node_name','<?php echo($sSortByUrl);?>')" <?php echo(Admin_Extend::sortField('node_name'));?>><?php print Dyhb::L("名称",'Template/Default/Node',null);?></a></th><th><a href="javascript:sortBy('node_title','<?php echo($sSortByUrl);?>')" <?php echo(Admin_Extend::sortField('node_title'));?>><?php print Dyhb::L("显示名",'Template/Default/Node',null);?></a></th><th><a href="javascript:sortBy('nodegroup_id','<?php echo($sSortByUrl);?>')" <?php echo(Admin_Extend::sortField('nodegroup_id'));?>><?php print Dyhb::L("分组",'Template/Default/Node',null);?></a></th><th><a href="javascript:sortBy('node_sort','<?php echo($sSortByUrl);?>')" <?php echo(Admin_Extend::sortField('node_sort'));?>><?php print Dyhb::L("序号",'Template/Default/Common',null);?></a></th><th><a href="javascript:sortBy('node_status','<?php echo($sSortByUrl);?>')" <?php echo(Admin_Extend::sortField('node_status'));?>><?php print Dyhb::L("状态",'Template/Default/Common',null);?></a></th><th><?php print Dyhb::L("操作",'Template/Default/Common',null);?></th></tr></thead><tbody><?php $i=1;?><?php if(is_array($oList)):foreach($oList as $key=>$value):?><tr><td><input type="checkbox" name="key" value="<?php echo($value->node_id);?>" <?php if($TheController->is_system_node($value->node_id)):?>disabled="disabled"<?php endif;?>></td><td><?php echo($value->node_id);?></td><td><a href="javascript:child('<?php echo($value->node_id);?>')"><?php echo($value->node_name);?></a><div class="row-actions"><span class='edit'><a href="javascript:edit('<?php echo($value->node_id);?>')"><?php print Dyhb::L("编辑",'Template/Default/Common',null);?></a>|</span><span class='delete'><a href="javascript:foreverdel('<?php echo($value->node_id);?>');"><?php print Dyhb::L("删除",'Template/Default/Common',null);?></a>|</span><span class='hide'><?php if($value->node_status == 1):?><a href="javascript:forbid('<?php echo($value->node_id);?>')"><?php print Dyhb::L("禁用",'Template/Default/Common',null);?></a><?php else:?><a href="javascript:resume('<?php echo($value->node_id);?>')"><?php print Dyhb::L("恢复",'Template/Default/Common',null);?></a><?php endif;?></span></div></td><td><a href="javascript:edit('<?php echo($value->node_id);?>')"><?php echo($value->node_title);?></a></td><td><?php if(!empty( $value->nodegroup->nodegroup_name )):?><a href="<?php echo(Dyhb::U('node/index?nodegroup_id='.$value->nodegroup_id));?>"><?php echo($value->nodegroup->nodegroup_title);?>-<?php echo($value->nodegroup->nodegroup_name);?></a><?php else:?><?php print Dyhb::L("未分组",'Template/Default/Node',null);?><?php endif;?></td><td class="pointer" title="<?php print Dyhb::L("点击修改数据",'Template/Default/Common',null);?>" id="node_sort_<?php echo($value->node_id);?>" onClick="clickToInput('node_sort','<?php echo($value->node_id);?>')"><?php echo($value->node_sort);?></td><td><img src="<?php echo(__TMPLPUB__);?>/Images/<?php if($value->node_status == 1):?>yes<?php else:?>no<?php endif;?>.gif"/></td><td><?php if($value->node_status==1):?><a href="javascript:forbid('<?php echo($value->node_id);?>')"><input type="image" src="<?php echo(__TMPLPUB__);?>/Images/icn_trash.png" title="<?php print Dyhb::L("禁用",'Template/Default/Common',null);?>"></a><?php else:?><a href="javascript:resume('<?php echo($value->node_id);?>')"><input type="image" src="<?php echo(__TMPLPUB__);?>/Images/icn_jump_back.png" title="<?php print Dyhb::L("恢复",'Template/Default/Common',null);?>"></a><?php endif;?>&nbsp;<a href="javascript:edit('<?php echo($value->node_id);?>')"><input type="image" src="<?php echo(__TMPLPUB__);?>/Images/icn_edit.png" title="<?php print Dyhb::L("编辑",'Template/Default/Common',null);?>"></a></td></tr><?php $i++;?><?php endforeach;endif;?></tbody></table></div></article><article class="module width_full"><div class="module_content"><?php echo($sPageNavbar);?></div></article><article class="module width_full"><div class="module_content"><div class="operate" ><input type="button" name="add" value="<?php print Dyhb::L("新增",'Template/Default/Common',null);?>" onclick="add()" class="alt_btn">&nbsp;
					<input type="button" name="edit" value="<?php print Dyhb::L("编辑",'Template/Default/Common',null);?>" onclick="edit()" class="alt_btn">&nbsp;
					<input type="button" name="delete" value="<?php print Dyhb::L("删除",'Template/Default/Common',null);?>" onclick="foreverdel()" class="alt_btn"><input type="button" name="sort" value="<?php print Dyhb::L("排序",'Template/Default/Common',null);?>" onclick="sort()" class="alt_btn"><select name="rolegroup" id="rolegroup" onChange="changeNodegroup(this);"><option value="0">-<?php print Dyhb::L("移动节点分组",'Template/Default/Node',null);?>-</option><?php if(is_array($arrNodegroup)):$i=0;$arrList=$arrNodegroup;if(count($arrList)==0):echo"";else:foreach($arrList as $key=>$value):++$i;$mod=($i%2)?><option value="<?php echo($value['nodegroup_id']);?>" <?php if(isset($_GET['nodegroup_id']) && ($_GET['nodegroup_id']===$value['nodegroup_id'] || (!$_GET['nodegroup_id']) && !$value['nodegroup_id'])):?>selected<?php endif;?>><?php echo($value['nodegroup_title']);?></option><?php endforeach;endif;else:echo "";endif;?></optgroup></select></div></div></article><div class="spacer"></div></section><?php $this->includeChildTemplate(TEMPLATE_PATH.'/Public/footer.html');?>