<?php  /* DoYouHaoBaby Framework 模板缓存文件 生成时间：2012-08-21 00:30:05  */ ?>
<?php $this->includeChildTemplate(TEMPLATE_PATH.'/Public/header.html');?><script type="text/javascript">function backup(){
	$("#submit_button").attr("disabled", "disabled");
	$("#submit_button").val( 'add...' );
}
</script><section class="secondary_bar"><div class="breadcrumbs_container"><article class="breadcrumbs"><a href="<?php echo(Dyhb::U('public/fmain'));?>"><?php print Dyhb::L("主页",'Template/Default/Common',null);?></a><div class="breadcrumb_divider"></div><a class="current"><?php print Dyhb::L("数据库备份",'Template/Default/Database',null);?></a><div class="breadcrumb_divider"></div><a href="javascript:void(0);" onclick="adminctrlmenuAdd('<?php echo(__SELF__);?>','<?php print Dyhb::L("数据库备份",'Template/Default/Database',null);?>')" title="<?php print Dyhb::L("添加到快捷导航",'Template/Default/Common',null);?>">[+]</a></article></div></section><?php if(isset($sWarning) && !empty( $sWarning )):?><h4 class="alert_info"><?php echo($sWarning);?></h4><?php endif;?><section id="main" class="column"><article class="module width_full"><header><h3><?php print Dyhb::L("操作提示",'Template/Default/Common',null);?></h3></header><div class="module_content"><ul><li><?php print Dyhb::L("在这里你可以对数据库进行备份，时常备份是一个非常好的习惯，这样防止数据丢失非常有帮助",'Template/Default/Database',null);?></li><li><?php print Dyhb::L("点击自定义备份，你可以选择性地备份数据库表",'Template/Default/Database',null);?></li><li><?php print Dyhb::L("Extended Insert方式备份的数据体积小，但是如果数据不完整（即使用分卷备份），无法恢复。一般请不要选择",'Template/Default/Database',null);?></li></ul></div></article><article class="module width_full"><header><h3 class="tabs_involved"><?php print Dyhb::L("数据库备份",'Template/Default/Database',null);?></h3><ul class="tabs"><li><a href="<?php echo(Dyhb::U('database/runsql'));?>"><?php print Dyhb::L("运行SQL语句",'Template/Default/Database',null);?></a></li><li class="active"><a href="<?php echo(Dyhb::U('database/restore'));?>"><?php print Dyhb::L("数据库恢复",'Template/Default/Database',null);?></a></li><li><a href="<?php echo(Dyhb::U('database/optimize'));?>"><?php print Dyhb::L("数据库优化",'Template/Default/Database',null);?></a></li></ul></header><form action="<?php echo(Dyhb::U('database/dumpsql'));?>" method="post" id="backup" onsubmit="backup();"><div class="module_content"><fieldset><label for="type"><?php print Dyhb::L("备份类型",'Template/Default/Database',null);?></label><input type="radio" name="type" value="full" checked="checked" onclick="document.getElementById('checkList').style.display='none'"><?php print Dyhb::L("全部备份",'Template/Default/Database',null);?><input type="radio" name="type" value="custom" onclick="document.getElementById('checkList').style.display='block'"><?php print Dyhb::L("自定义备份",'Template/Default/Database',null);?><div class="description"><?php print Dyhb::L("请选择备份类型，可以全部备份，也可以备份一部分",'Template/Default/Database',null);?></div></fieldset><fieldset id="checkList" class="none"><label for="type"><?php print Dyhb::L("数据库表",'Template/Default/Database',null);?></label><table style="border:1px solid #ccc;margin:10px;"><tr><td colspan="4"><input onclick="checkAll('checkList')" type="checkbox"><b><?php print Dyhb::L("全选",'Template/Default/Database',null);?></b></td></tr><tr><?php if(is_array($arrTables)):$i=0;$arrList=$arrTables;if(count($arrList)==0):echo"";else:foreach($arrList as $key=>$sTable):++$i;$mod=($i%4)?><?php if(($mod) == "1"):?></tr><tr><?php endif;?><td><input name="customtables[]" value="<?php echo($sTable);?>" type="checkbox"><?php echo($sTable);?></td><?php endforeach;endif;else:echo "";endif;?></tr></table><div class="description"><?php print Dyhb::L("请选择备份的数据库表",'Template/Default/Database',null);?></div></fieldset><fieldset><label for="ext_insert" ><?php print Dyhb::L("插入方式",'Template/Default/Database',null);?></label><input type="radio" name="ext_insert" value='1'><?php print Dyhb::L("是",'Template/Default/Common',null);?><input type="radio" name="ext_insert" value='0' checked="checked"><?php print Dyhb::L("否",'Template/Default/Common',null);?><div class="description"><?php print Dyhb::L("数据库备份插入(Extended Insert)方式",'Template/Default/Database',null);?></div></fieldset><fieldset><label for="vol_size"><?php print Dyhb::L("分卷文件长度",'Template/Default/Database',null);?></label><input type="text" name="vol_size" value="<?php echo($nVolSize);?>" ><div class="description"><?php print Dyhb::L("当数据量大的时候，分卷备份能够解决备份时卡死的现象，分卷备份长度限制单位为(KB)",'Template/Default/Database',null);?></div></fieldset><fieldset><label for="sql_file_name"><?php print Dyhb::L("备份文件名",'Template/Default/Database',null);?></label><input type="text" name="sql_file_name" value="<?php echo($sSqlName);?>"><div class="description"><?php print Dyhb::L("数据库备份文件名字",'Template/Default/Database',null);?></div></fieldset></div><footer><div class="submit_link"><input id="submit_button" type="submit" class="alt_btn" value="<?php print Dyhb::L("开始备份",'Template/Default/Database',null);?>" />						&nbsp;<input type="reset" value="<?php print Dyhb::L("重置",'Template/Default/Common',null);?>"></div></footer></form></article><div class="spacer"></div></section><?php $this->includeChildTemplate(TEMPLATE_PATH.'/Public/footer.html');?>