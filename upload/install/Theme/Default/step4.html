<include file="header">

<div class="title"><lang package='Default/Install'>环境检测</lang></div>
<div id="main">
   <div class="item-title"><lang package='Default/Install'>服务器信息</lang></div>
   <p>
		<table width="726" border="0" align="center" cellpadding="0" cellspacing="0" class="twbox">
			<tr>
				<th width="300" align="center"><strong><lang package='Default/Install'>参数</lang></strong></th>
				<th width="424"><strong><lang package='Default/Install'>值</lang></strong></th>
			</tr>
			<tr>
					<td><strong><lang package='Default/Install'>服务器域名</lang></strong></td>
					<td>{$arrInfo['sp_name']}</td>
			</tr>
			<tr>
					<td><strong><lang package='Default/Install'>服务器操作系统</lang></strong></td>
					<td>{$arrInfo['sp_os']}</td>
			</tr>
			<tr>
					<td><strong><lang package='Default/Install'>服务器解译引擎</lang></strong></td>
					<td>{$arrInfo['sp_server']}</td>
			</tr>
			<tr>
					<td><strong><lang package='Default/Install'>PHP版本</lang></strong></td>
					<td>{$arrInfo['phpv']}</td>
			</tr>
			<tr>
					<td><strong><lang package='Default/Install'>系统安装目录</lang></strong></td>
					<td>{:NEEDFORBUG_PATH}</td>
			</tr>
		</table>
		</p><p>
		<div class="item-title"><lang package='Default/Install'>系统环境检测</lang></div>
		<p>
		<div style="padding:2px 8px 0px; line-height:33px; height:23px; overflow:hidden; color:#666;">
			<lang package='Default/Install'>系统环境要求必须满足下列所有条件，否则系统或系统部份功能将无法使用。</lang>
		</div>
		<table width="726" border="0" align="center" cellpadding="0" cellspacing="0" class="twbox">
			<tr>
				<th width="200" align="center"><strong><lang package='Default/Install'>需开启的变量或函数</lang></strong></th>
				<th width="80"><strong><lang package='Default/Install'>要求</lang></strong></th>
				<th width="400"><strong><lang package='Default/Install'>实际状态及建议</lang></strong></th>
			</tr>
			<tr>
					<td>allow_url_fopen</td>
					<td align="center">On </td>
					<td>{$arrInfo['sp_allow_url_fopen']} <small>(<lang package='Default/Install'>不符合要求将导致采集、远程资料本地化等功能无法应用</lang>)</small></td>
			</tr>
			<tr>
					<td>safe_mode</td>
					<td align="center">Off</td>
					<td>{$arrInfo['sp_safe_mode']} <small>(<lang package='Default/Install'>本系统不支持在</lang><span class="STYLE2"><lang package='Default/Install'>非win主机的安全模式</lang></span><lang package='Default/Install'>下运行</lang>)</small></td>
			</tr>
			
			<tr>
					<td><lang package='Default/Install'>GD 支持</lang></td>
					<td align="center">On</td>
					<td>{$arrInfo['sp_gd']} <small>(<lang package='Default/Install'>不支持将导致与图片相关的大多数功能无法使用或引发警告</lang>)</small></td>
			</tr>
			<tr>
					<td><lang package='Default/Install'>MySQL 支持</lang></td>
					<td align="center">On</td>
					<td>{$arrInfo['sp_mysql']} <small>(<lang package='Default/Install'>不支持无法使用本系统</lang>)</small></td>
			</tr>
		</table>
		</p>
		<div class="item-title"><lang package='Default/Install'>目录权限检测</lang></div>
		<p>
		<div style="padding:2px 8px 0px; line-height:33px; height:23px; overflow:hidden; color:#666;">
			<lang package='Default/Install'>系统要求必须满足下列所有的目录权限全部可读写的需求才能使用，其它应用目录可安装后在管理后台检测。</lang>
		</div>
		<div style="margin-top:10px;margin-bottom:15px; padding:8px; height:100px; border:1px solid #EEE; background:#FFF; overflow:scroll; overflow-x:hidden;">
		<table width="726" border="0" align="center" cellpadding="0" cellspacing="0" class="twbox">
			<tr>
				<th width="300" align="center"><strong><lang package='Default/Install'>目录名</lang> + <lang package='Default/Install'>文件名</lang></strong></th>
				<th width="212"><strong><lang package='Default/Install'>读取权限</lang></strong></th>
				<th width="212"><strong><lang package='Default/Install'>写入权限</lang></strong></th>
			</tr>
			<foreach for=arrSpTestDirs value=sSpTestDir>
			<tr>
				<td>{$sSpTestDir}</td>
				<php>
					$sFullPath=NEEDFORBUG_PATH.'/'.str_replace( '/*','',$sSpTestDir );
					$sRsta=( is_readable( $sFullPath ) ? '<font color=green>[√]'.Dyhb::L( '读','Default/Install' ).'</font>' : '<font color=red>[×]'.Dyhb::L( '读','Default/Install' ).'</font>' );
				$sWsta=( ( is_file( $sFullPath )?is_writeable( $sFullPath ):testWrite( $sFullPath ) ) ? '<font color=green>[√]'.Dyhb::L( '写','Default/Install' ).'</font>' : '<font color=red>[×]'.Dyhb::L( '写','Default/Install' ).'</font>' );
				</php>
				<td>{$sRsta}</td><td>{$sWsta}</td>
			</tr>
			</foreach>
		</table>
		</div>
		</p>
	<div align='center'>
	<input type="button" class="btn-back" value="<lang package='Default/Install'>后退</lang>" onclick="window.location.href='{if MODULE_NAME==='index'}{:Dyhb::U( 'index/step3' )}{d*else}{:Dyhb::U( 'update/index' )}{/if}';" />
	<input type="button" class="btn-back" value="<lang package='Default/Install'>下一步</lang>" onclick="window.location.href='{if MODULE_NAME==='index'}{:Dyhb::U( 'index/step5' )}{d*else}{:Dyhb::U( 'update/step3' )}{/if}';" />
	</div>
</div>

<include file="footer">